
---

# 📺 跨平台直播自动录制控制台 (Live Stream Recorder)

这是一个基于 Go + Vue 3 + Arco Design 开发的**轻量级、跨平台直播自动录制工具**。通过内置的美观 Web 控制台，你可以轻松管理多平台的直播监控与录制任务。

## ✨ 核心功能

* 🌐 **多平台支持**：目前支持 抖音 (Douyin)、快手 (Kuaishou)、Soop (AfreecaTV)。
* 🎨 **内置高颜值 Web UI**：采用 Arco Design 构建，前端页面直接编译打包进 Go 程序中，真正的**单文件绿色运行**。
* 🤖 **智能 FFmpeg 检测**：无需繁琐配置系统环境变量，只需将 `ffmpeg.exe` 放在程序同级目录，即可自动识别并接管录制。
* 📊 **实时状态监控**：直观展示当前录制状态、本次录制时长、本地文件占用总大小。
* ⚙️ **高级录制控制**：
* 支持自定义默认画质（蓝光/超清、高清、标清）。
* 支持**视频无损分片**（例如每 15 分钟自动切割生成新文件，防丢失、不漏帧）。
* 支持自定义录制文件保存路径（绝对路径或相对路径）。
* 支持对指定任务进行 **暂停、恢复、永久删除** 操作。


* 🍪 **防风控机制**：支持在 Web 面板中直接热更新浏览器 Cookie，解决抖音等平台的验证码风控问题。

---

## 🛠️ 安装与运行指南

### 1. 环境准备 (必须)

本程序的核心录制引擎依赖 **FFmpeg**。

* 请前往 [FFmpeg 官网](https://ffmpeg.org/download.html) 下载对应系统版本的可执行文件。
* **Windows 用户最简方案**：下载压缩包后解压，在 `bin` 目录下找到 `ffmpeg.exe`，直接将其**复制到本程序的同级目录**下即可（程序会自动识别，免配环境变量！）。

### 2. 启动服务

你可以直接运行源码，或者编译成可执行文件：

**直接运行源码：**

```bash
# 进入项目目录
cd live-recorder
# 运行程序
go run main.go

```

**编译为单文件（推荐）：**

```bash
go build -o live-recorder.exe main.go
# 运行编译后的程序
./live-recorder.exe

```

### 3. 访问控制台

启动成功后，控制台会输出监听端口。打开浏览器访问：
👉 **http://localhost:9091** （如果是部署在服务器/软路由上，请将 `localhost` 替换为服务器的具体 IP）。

---

## 📖 使用说明

1. **基础设置**：
* 第一次使用时，建议在左上角的“基础设置”中配置你的**录制保存路径**（如 `D:\Downloads` 或 `./downloads`）。
* 设定**自动分片时长**（建议 15-30 分钟，设为 0 则不分片）。
* *注意：修改分片配置后，如果任务正在录制中，请在右侧点击【暂停】再【恢复】，新配置即可立即生效。*


2. **添加监控任务**：
* 选择平台，粘贴直播间的**完整网址**或**纯数字 ID**。
* 点击“立即添加”，程序会自动拉取主播信息并进入“监控中”或“未开播等待中”的状态。


3. **解决无法录制（Cookie 热更新）**：
* 如果长时间卡在“监控中”但确定主播已经开播，可能是触发了平台风控。
* 打开浏览器，登录对应平台的网页版，按 `F12` 抓取请求头中的 `Cookie`，粘贴到面板的【身份验证 (Cookie)】页签中并保存即可。



---

## 📁 目录结构

```text
live-recorder/
├── main.go            # 后端 Go 核心逻辑 (API、监控调度、FFmpeg进程控制)
├── index.html         # 前端 Vue 3 界面 (编译时通过 //go:embed 自动打包入 exe)
├── go.mod             # Go 模块依赖
├── config.json        # 自动生成的持久化配置文件 
├── cookies.json       # 自动生成的 Cookie 保存文件 
└── ffmpeg.exe         # 需要用户自行放入的录制引擎

```

---

## ❓ 常见问题排查 (FAQ)

**Q1: 为什么状态显示“录制中”，但录制时长是 00:00，并且立马变成了“异常/断流”？**

> **A:** 你的电脑或同级目录下没有找到 FFmpeg 工具。请下载 `ffmpeg.exe` 并将其放到与 `main.go` / `live-recorder.exe` 同一个文件夹下。

**Q2: 为什么我的录制时长和文件大小显示空白（只有小图标）？**

> **A:** 请确保前端和后端的代码版本一致。如果你更新了 `index.html`，必须**彻底重启 Go 服务**才能让新接口生效。

**Q3: 修改了自动分片时长（比如改成 15分钟），为什么没有切片？**

> **A:** 修改基础配置不会打断**正在进行中**的底层录制进程。请在面板列表中找到该主播，点击操作列的**【暂停】**，等待 2 秒变成“已暂停”后，再点击**【恢复】**，即可应用新的切片配置。

---

## ⚠️ 免责声明

本工具仅供个人学习、技术研究与自动化测试使用。请勿将录制的视频用于商业用途或侵犯他人知识产权。使用本工具所产生的一切法律后果由使用者自行承担。